# æ¸¸æˆå……å€¼å¹³å° - æŠ€æœ¯æ¶æ„åˆ†æ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Game Recharge Platform (æ¸¸æˆå……å€¼å¹³å°)  
**æ¶æ„æ¨¡å¼**: å‰åç«¯åˆ†ç¦» (Frontend-Backend Separation)  
**å¼€å‘è¯­è¨€**: TypeScript (å…¨æ ˆ)

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±‚ (Frontend)                      â”‚
â”‚  React 18 + TypeScript + Vite + Tailwind CSS                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP/REST API
                        â”‚ (CORS Enabled)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åç«¯å±‚ (Backend)                         â”‚
â”‚  Node.js + Express + TypeScript + Prisma ORM                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL  â”‚ â”‚    Redis    â”‚ â”‚   Auth0     â”‚
â”‚   (ä¸»æ•°æ®åº“)  â”‚ â”‚   (ç¼“å­˜)    â”‚ â”‚  (èº«ä»½è®¤è¯)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ                        â”‚
â”‚  â€¢ Stripe (æ”¯ä»˜)                               â”‚
â”‚  â€¢ PayPal (æ”¯ä»˜)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ å‰ç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **React 18.2.0**: ç”¨æˆ·ç•Œé¢åº“
- **TypeScript 5.2.2**: ç±»å‹å®‰å…¨
- **Vite 5.1.0**: æ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨

### UI ä¸æ ·å¼
- **Tailwind CSS 3.4.1**: å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **PostCSS + Autoprefixer**: CSS å¤„ç†
- **Lucide React**: å›¾æ ‡åº“
- **Swiper 12.0.3**: è½®æ’­ç»„ä»¶

### çŠ¶æ€ç®¡ç†
- **Zustand 4.5.0**: è½»é‡çº§çŠ¶æ€ç®¡ç†åº“
  - ç”¨äºå…¨å±€çŠ¶æ€ï¼ˆè®¤è¯æ¨¡å¼ã€æ¼”ç¤ºè§’è‰²ç­‰ï¼‰

### è·¯ç”±
- **React Router DOM 6.22.0**: å®¢æˆ·ç«¯è·¯ç”±
  - è·¯ç”±é¡µé¢ï¼š
    - `/` - é¦–é¡µ
    - `/game/:id` - æ¸¸æˆè¯¦æƒ…
    - `/orders` - è®¢å•åˆ—è¡¨
    - `/merchant` - å•†æˆ·ç®¡ç†
    - `/merchant/apply` - å•†æˆ·ç”³è¯·
    - `/admin` - ç®¡ç†å‘˜é¢æ¿
    - `/login` - ç™»å½•é¡µ

### å›½é™…åŒ–
- **i18next 23.8.0**: å›½é™…åŒ–æ¡†æ¶
- **react-i18next 14.0.0**: React ç»‘å®š
- æ”¯æŒè¯­è¨€ï¼šä¸­æ–‡ (zh)ã€æ—¥æ–‡ (ja)ã€è‹±æ–‡ (en)

### è®¤è¯
- **@auth0/auth0-react 2.11.0**: Auth0 React SDK
  - OAuth 2.0 / OpenID Connect
  - æ”¯æŒåˆ·æ–°ä»¤ç‰Œ
  - å†…å­˜ç¼“å­˜

### æ”¯ä»˜é›†æˆ
- **@stripe/react-stripe-js 5.4.1**: Stripe React ç»„ä»¶
- **@stripe/stripe-js 8.5.3**: Stripe JS SDK
- **@paypal/react-paypal-js 8.9.2**: PayPal React ç»„ä»¶

### å·¥å…·åº“
- **Zod 4.1.13**: è¿è¡Œæ—¶ç±»å‹éªŒè¯
- **clsx 2.1.0**: æ¡ä»¶ç±»åå·¥å…·
- **tailwind-merge 2.2.0**: Tailwind ç±»ååˆå¹¶

---

## âš™ï¸ åç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Node.js**: è¿è¡Œæ—¶ç¯å¢ƒ
- **Express 4.18.2**: Web æ¡†æ¶
- **TypeScript 5.2.2**: ç±»å‹å®‰å…¨
- **tsx 4.7.0**: TypeScript æ‰§è¡Œå™¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

### æ•°æ®åº“ä¸ ORM
- **Prisma 5.8.1**: ç°ä»£ ORM
  - ç±»å‹å®‰å…¨çš„æ•°æ®åº“å®¢æˆ·ç«¯
  - æ•°æ®åº“è¿ç§»ç®¡ç†
  - Prisma Studio (æ•°æ®åº“å¯è§†åŒ–)
- **PostgreSQL 16**: å…³ç³»å‹æ•°æ®åº“
  - é€šè¿‡ Docker Compose éƒ¨ç½²

### è®¤è¯ä¸æˆæƒ
- **express-oauth2-jwt-bearer 1.6.0**: Auth0 JWT éªŒè¯ä¸­é—´ä»¶
- **jose**: JWT å¤„ç†åº“
- æ”¯æŒ Auth0 SSO å•ç‚¹ç™»å½•
- æ¼”ç¤ºæ¨¡å¼æ”¯æŒï¼ˆDemo Modeï¼‰

### æ”¯ä»˜é›†æˆ
- **Stripe 14.15.0**: Stripe Node.js SDK
  - Webhook æ”¯æŒï¼ˆåŸå§‹è¯·æ±‚ä½“ï¼‰
- **@paypal/checkout-server-sdk 1.0.3**: PayPal æœåŠ¡å™¨ç«¯ SDK

### å®‰å…¨
- **Helmet 7.1.0**: HTTP å®‰å…¨å¤´
- **CORS 2.8.5**: è·¨åŸŸèµ„æºå…±äº«
  - å…è®¸ localhost:5173/5174ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
  - æ”¯æŒå‡­è¯ä¼ é€’

### æ—¥å¿—
- **Pino 9.0.0**: é«˜æ€§èƒ½æ—¥å¿—åº“
- **pino-http 10.3.0**: Express HTTP æ—¥å¿—ä¸­é—´ä»¶

### æ•°æ®éªŒè¯
- **Zod 3.22.4**: è¿è¡Œæ—¶ç±»å‹éªŒè¯å’Œè§£æ

### ç¯å¢ƒé…ç½®
- **dotenv 16.4.1**: ç¯å¢ƒå˜é‡ç®¡ç†

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### æ•°æ®æ¨¡å‹ (Prisma Schema)

#### æ ¸å¿ƒå®ä½“

1. **User (ç”¨æˆ·)**
   - è§’è‰²ï¼šUSER, ADMIN, MERCHANT
   - å…³è” Auth0 (auth0Sub)
   - å…³è”å•†æˆ·ã€è®¢å•ã€å•†æˆ·ç”³è¯·

2. **Merchant (å•†æˆ·)**
   - çŠ¶æ€ï¼šACTIVE, SUSPENDED
   - å¤šå¯¹å¤šå…³è”ç”¨æˆ· (MerchantUser)
   - å…³è”æ¸¸æˆã€è®¢å•

3. **Game (æ¸¸æˆ)**
   - å¤šè¯­è¨€æ”¯æŒ (nameZh, nameJa, nameEn)
   - å…³è”å•†æˆ·ã€SKUã€è®¢å•
   - æ”¯æŒå¤šå•†æˆ·å…³è” (MerchantGame)

4. **SKU (å•†å“å•å…ƒ)**
   - å¤šè¯­è¨€æ”¯æŒ
   - ä»·æ ¼ã€è´§å¸ã€æŠ˜æ‰£
   - å›¾ç‰‡ã€æ’åº

5. **Order (è®¢å•)**
   - çŠ¶æ€ï¼šPENDING, PAID, FAILED, CANCELED
   - æ”¯ä»˜æä¾›å•†ï¼šSTRIPE, PAYPAL
   - å…³è”ç”¨æˆ·ã€å•†æˆ·ã€æ¸¸æˆã€SKU
   - æ”¯æŒè®¿å®¢è®¢å• (visitorId)

6. **MerchantApplication (å•†æˆ·ç”³è¯·)**
   - çŠ¶æ€ï¼šPENDING, APPROVED, REJECTED
   - å®¡æ ¸æµç¨‹æ”¯æŒ

### å…³ç³»è®¾è®¡
- **å¤šå¯¹å¤šå…³ç³»**:
  - Merchant â†” User (MerchantUser)
  - Merchant â†” Game (MerchantGame)
- **ä¸€å¯¹å¤šå…³ç³»**:
  - User â†’ Orders
  - Merchant â†’ Games â†’ SKUs
  - Game â†’ Orders

### ç´¢å¼•ä¼˜åŒ–
- ç”¨æˆ·è®¢å•æŸ¥è¯¢ç´¢å¼•: `[userId, createdAt]`
- å•†æˆ·è®¢å•æŸ¥è¯¢ç´¢å¼•: `[merchantId, createdAt]`
- å•†æˆ·ç”³è¯·çŠ¶æ€ç´¢å¼•: `[status]`

---

## ğŸ”Œ API æ¶æ„

### RESTful API è®¾è®¡

#### è·¯ç”±æ¨¡å—

1. **å¥åº·æ£€æŸ¥**
   - `GET /health` - æœåŠ¡å¥åº·çŠ¶æ€

2. **ç”¨æˆ·ç›¸å…³**
   - `GET /api/me` - å½“å‰ç”¨æˆ·ä¿¡æ¯
   - `GET /api/users` - ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰

3. **æ¸¸æˆç›¸å…³**
   - `GET /api/games` - æ¸¸æˆåˆ—è¡¨
   - `GET /api/games/:id` - æ¸¸æˆè¯¦æƒ…

4. **SKU ç›¸å…³**
   - `GET /api/skus` - SKU åˆ—è¡¨
   - `GET /api/skus/:id` - SKU è¯¦æƒ…

5. **è®¢å•ç›¸å…³**
   - `GET /api/orders` - è®¢å•åˆ—è¡¨
   - `POST /api/orders` - åˆ›å»ºè®¢å•
   - `GET /api/orders/:id` - è®¢å•è¯¦æƒ…

6. **å•†æˆ·ç›¸å…³**
   - `GET /api/merchant` - å•†æˆ·ä¿¡æ¯
   - `POST /api/merchant/apply` - å•†æˆ·ç”³è¯·
   - `GET /api/admin/merchants` - å•†æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰

7. **æ”¯ä»˜ç›¸å…³**
   - **Stripe**:
     - `POST /api/payments/stripe/create-intent` - åˆ›å»ºæ”¯ä»˜æ„å›¾
     - `POST /api/webhooks/stripe` - Stripe Webhook
   - **PayPal**:
     - `POST /api/payments/paypal/create-order` - åˆ›å»º PayPal è®¢å•
     - `POST /api/payments/paypal/capture` - æ•è·æ”¯ä»˜

### ä¸­é—´ä»¶é“¾

```
è¯·æ±‚ â†’ Pino HTTP æ—¥å¿— â†’ Helmet å®‰å…¨å¤´ â†’ CORS â†’ 
Body Parser â†’ è·¯ç”±å¤„ç† â†’ é”™è¯¯å¤„ç†
```

### è®¤è¯æœºåˆ¶

1. **ç”Ÿäº§æ¨¡å¼**: Auth0 JWT Bearer Token
2. **æ¼”ç¤ºæ¨¡å¼**: 
   - Header: `X-Demo-Role` (visitor/user/merchant/admin)
   - Header: `X-Demo-Merchant-Id` (å•†æˆ·IDï¼Œå¯é€‰)

---

## ğŸ³ åŸºç¡€è®¾æ–½

### Docker Compose æœåŠ¡

```yaml
services:
  postgres:  # PostgreSQL 16
    - ç«¯å£: 5432
    - æ•°æ®åº“: gamepay
    - æŒä¹…åŒ–å­˜å‚¨
  
  redis:     # Redis 7
    - ç«¯å£: 6379
    - ç”¨é€”: ç¼“å­˜ï¼ˆå½“å‰é…ç½®ï¼Œå¾…ä½¿ç”¨ï¼‰
```

### ç¯å¢ƒå˜é‡

#### åç«¯ (.env)
- `PORT`: æœåŠ¡å™¨ç«¯å£ (é»˜è®¤: 8080)
- `DATABASE_URL`: PostgreSQL è¿æ¥å­—ç¬¦ä¸²
- `AUTH0_DOMAIN`: Auth0 åŸŸå
- `AUTH0_AUDIENCE`: Auth0 API æ ‡è¯†ç¬¦
- `STRIPE_SECRET_KEY`: Stripe å¯†é’¥
- `STRIPE_WEBHOOK_SECRET`: Stripe Webhook å¯†é’¥
- `PAYPAL_CLIENT_ID`: PayPal å®¢æˆ·ç«¯ ID
- `PAYPAL_CLIENT_SECRET`: PayPal å®¢æˆ·ç«¯å¯†é’¥
- `PAYPAL_ENV`: PayPal ç¯å¢ƒ (sandbox/live)

#### å‰ç«¯ (.env)
- `VITE_API_BASE_URL`: API åŸºç¡€ URL
- `VITE_AUTH0_DOMAIN`: Auth0 åŸŸå
- `VITE_AUTH0_CLIENT_ID`: Auth0 å®¢æˆ·ç«¯ ID
- `VITE_AUTH0_AUDIENCE`: Auth0 API æ ‡è¯†ç¬¦

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
game-recharge-platform/
â”œâ”€â”€ frontend/                    # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GameCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HeroCarousel.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentModal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SKUCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ToastHost.tsx
â”‚   â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GameDetail.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Orders.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Merchant.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MerchantApply.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Admin.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Login.tsx
â”‚   â”‚   â”œâ”€â”€ services/            # API æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts           # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ mockData.ts      # æ¨¡æ‹Ÿæ•°æ®
â”‚   â”‚   â”œâ”€â”€ store/               # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ useStore.ts      # Zustand store
â”‚   â”‚   â”‚   â””â”€â”€ useToast.ts      # Toast é€šçŸ¥
â”‚   â”‚   â”œâ”€â”€ types/               # TypeScript ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ auth/                # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ i18n/                # å›½é™…åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚   â”‚       â”œâ”€â”€ zh.json
â”‚   â”‚   â”‚       â”œâ”€â”€ ja.json
â”‚   â”‚   â”‚       â””â”€â”€ en.json
â”‚   â”‚   â”œâ”€â”€ App.tsx              # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.tsx             # å…¥å£æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js       # Tailwind é…ç½®
â”‚   â””â”€â”€ tsconfig.json            # TypeScript é…ç½®
â”‚
â”œâ”€â”€ backend/                     # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/              # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ health.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ me.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ games.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ skus.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ orders.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ merchant.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ merchantApply.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ adminMerchants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ paymentsStripe.ts
â”‚   â”‚   â”‚   â””â”€â”€ paymentsPaypal.ts
â”‚   â”‚   â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ demoAuth.ts      # æ¼”ç¤ºæ¨¡å¼è®¤è¯
â”‚   â”‚   â”‚   â””â”€â”€ error.ts         # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ payments/            # æ”¯ä»˜æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ stripe.ts
â”‚   â”‚   â”‚   â””â”€â”€ paypal.ts
â”‚   â”‚   â”œâ”€â”€ auth/                # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ app.ts               # Express åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.ts             # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ config.ts            # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ db.ts                # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â””â”€â”€ logger.ts            # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ schema.prisma        # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ migrations/          # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â””â”€â”€ seed.ts              # ç§å­æ•°æ®
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ database/                    # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ docker-compose.yml       # Docker Compose é…ç½®
â”‚
â””â”€â”€ docs/                        # æ–‡æ¡£
    â””â”€â”€ AUTH0_SSO_SETUP.md       # Auth0 è®¾ç½®æ–‡æ¡£
```

---

## ğŸ” å®‰å…¨ç‰¹æ€§

1. **HTTP å®‰å…¨å¤´** (Helmet)
   - XSS ä¿æŠ¤
   - å†…å®¹å®‰å…¨ç­–ç•¥
   - HSTS

2. **CORS é…ç½®**
   - é™åˆ¶å…è®¸çš„æº
   - å‡­è¯æ”¯æŒ

3. **è®¤è¯ä¸æˆæƒ**
   - JWT Bearer Token
   - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
   - Auth0 å•ç‚¹ç™»å½•

4. **æ”¯ä»˜å®‰å…¨**
   - Webhook ç­¾åéªŒè¯ (Stripe)
   - æœåŠ¡å™¨ç«¯æ”¯ä»˜å¤„ç†
   - æ•æ„Ÿä¿¡æ¯ä¸æš´éœ²åˆ°å®¢æˆ·ç«¯

---

## ğŸš€ å¼€å‘å·¥ä½œæµ

### å‰ç«¯å¼€å‘
```bash
cd frontend
npm install
npm run dev        # å¼€å‘æœåŠ¡å™¨ (Vite)
npm run build      # ç”Ÿäº§æ„å»º
npm run preview    # é¢„è§ˆæ„å»ºç»“æœ
```

### åç«¯å¼€å‘
```bash
cd backend
npm install
npm run dev        # å¼€å‘æœåŠ¡å™¨ (tsx watch)
npm run build      # TypeScript ç¼–è¯‘
npm start          # ç”Ÿäº§è¿è¡Œ

# æ•°æ®åº“æ“ä½œ
npm run prisma:generate    # ç”Ÿæˆ Prisma Client
npm run prisma:migrate     # è¿è¡Œè¿ç§»
npm run prisma:studio     # æ‰“å¼€ Prisma Studio
```

### æ•°æ®åº“
```bash
cd database
docker-compose up -d       # å¯åŠ¨ PostgreSQL å’Œ Redis
```

---

## ğŸ“Š æŠ€æœ¯é€‰å‹ç†ç”±

### å‰ç«¯
- **React + TypeScript**: ç±»å‹å®‰å…¨ã€ç»„ä»¶åŒ–ã€ç”Ÿæ€ä¸°å¯Œ
- **Vite**: æé€Ÿçš„å¼€å‘ä½“éªŒã€å¿«é€Ÿ HMR
- **Tailwind CSS**: å¿«é€Ÿå¼€å‘ã€å“åº”å¼è®¾è®¡ã€å¯ç»´æŠ¤æ€§
- **Zustand**: è½»é‡çº§ã€ç®€å•æ˜“ç”¨ã€æ€§èƒ½å¥½
- **i18next**: æˆç†Ÿçš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆ

### åç«¯
- **Express**: æˆç†Ÿç¨³å®šã€ä¸­é—´ä»¶ä¸°å¯Œã€ç¤¾åŒºæ´»è·ƒ
- **Prisma**: ç±»å‹å®‰å…¨ã€è¿ç§»ç®¡ç†ã€å¼€å‘ä½“éªŒå¥½
- **PostgreSQL**: åŠŸèƒ½å¼ºå¤§ã€ACID ä¿è¯ã€JSON æ”¯æŒ
- **Pino**: é«˜æ€§èƒ½æ—¥å¿—ã€ç»“æ„åŒ–æ—¥å¿—ã€å¯æ‰©å±•

### è®¤è¯
- **Auth0**: ä¼ä¸šçº§ SSOã€å¤šå¹³å°æ”¯æŒã€å®‰å…¨å¯é 

### æ”¯ä»˜
- **Stripe + PayPal**: å…¨çƒè¦†ç›–ã€API å®Œå–„ã€æ–‡æ¡£é½å…¨

---

## ğŸ”„ æ•°æ®æµ

### è®¢å•åˆ›å»ºæµç¨‹

```
ç”¨æˆ·é€‰æ‹© SKU
    â†“
å‰ç«¯: åˆ›å»ºè®¢å•è¯·æ±‚
    â†“
åç«¯: éªŒè¯ â†’ åˆ›å»ºè®¢å•è®°å½• (PENDING)
    â†“
åç«¯: è°ƒç”¨æ”¯ä»˜æä¾›å•† API
    â†“
å‰ç«¯: æ˜¾ç¤ºæ”¯ä»˜ç•Œé¢ (Stripe/PayPal)
    â†“
ç”¨æˆ·å®Œæˆæ”¯ä»˜
    â†“
æ”¯ä»˜æä¾›å•† Webhook â†’ åç«¯
    â†“
åç«¯: æ›´æ–°è®¢å•çŠ¶æ€ (PAID/FAILED)
    â†“
å‰ç«¯: è½®è¯¢æˆ– WebSocket æ›´æ–°è®¢å•çŠ¶æ€
```

---

## ğŸ“ˆ æ‰©å±•æ€§è€ƒè™‘

1. **æ°´å¹³æ‰©å±•**
   - æ— çŠ¶æ€åç«¯è®¾è®¡
   - æ•°æ®åº“è¿æ¥æ± 
   - Redis ç¼“å­˜å±‚ï¼ˆå·²é…ç½®ï¼Œå¾…ä½¿ç”¨ï¼‰

2. **æ€§èƒ½ä¼˜åŒ–**
   - æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
   - API å“åº”ç¼“å­˜
   - å‰ç«¯ä»£ç åˆ†å‰²ï¼ˆVite è‡ªåŠ¨ï¼‰

3. **ç›‘æ§ä¸æ—¥å¿—**
   - Pino ç»“æ„åŒ–æ—¥å¿—
   - å¯é›†æˆ APM å·¥å…·
   - å¥åº·æ£€æŸ¥ç«¯ç‚¹

---

## ğŸ¯ æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**ç°ä»£åŒ–çš„å…¨æ ˆæ¸¸æˆå……å€¼å¹³å°**ï¼Œé‡‡ç”¨ï¼š

- âœ… **å‰åç«¯åˆ†ç¦»æ¶æ„**ï¼ŒèŒè´£æ¸…æ™°
- âœ… **TypeScript å…¨æ ˆ**ï¼Œç±»å‹å®‰å…¨
- âœ… **ç°ä»£å·¥å…·é“¾**ï¼Œå¼€å‘ä½“éªŒä¼˜ç§€
- âœ… **ä¼ä¸šçº§è®¤è¯**ï¼Œå®‰å…¨å¯é 
- âœ… **å¤šæ”¯ä»˜é›†æˆ**ï¼Œè¦†ç›–å…¨çƒ
- âœ… **å›½é™…åŒ–æ”¯æŒ**ï¼Œå¤šè¯­è¨€
- âœ… **å¯æ‰©å±•è®¾è®¡**ï¼Œæ˜“äºç»´æŠ¤

æŠ€æœ¯æ ˆé€‰æ‹©åˆç†ï¼Œæ¶æ„æ¸…æ™°ï¼Œé€‚åˆä¸­å¤§å‹é¡¹ç›®å¼€å‘ã€‚
